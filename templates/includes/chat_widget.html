{% load static %}
<!-- Advanced AI Integration: Sidebar System -->
<div id="ai-system-container">
    <!-- The Edge Trigger -->
    <div id="ai-edge-trigger" onclick="toggleChat()">
        <div class="trigger-glow"></div>
        <div class="trigger-content">
            <img src="{% static 'ai_logo.png' %}" alt="AI" class="trigger-logo">
            <span class="trigger-text">AI ASSISTANT</span>
        </div>
    </div>

    <!-- The Sidebar Panel -->
    <div id="ai-sidebar" class="premium-glass">
        <div class="sidebar-inner">
            <div class="sidebar-header">
                <div class="agent-brand">
                    <img src="{% static 'ai_logo.png' %}" alt="AI Agent" class="header-logo">
                    <div class="header-text">
                        <span class="agent-name">Ding Assistent</span>
                        <span class="agent-status"><span class="pulse"></span> Online</span>
                    </div>
                </div>
                <div class="header-actions-top">
                    <button class="action-btn-header" onclick="clearHistory()" title="Clear Conversation">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                            </path>
                        </svg>
                    </button>
                    <button class="close-trigger" onclick="toggleChat()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M15 18l-6-6 6-6" />
                        </svg>
                    </button>
                </div>
            </div>

            <div id="chat-messages" class="chat-viewport">
                <!-- Status Badge -->
                <div class="ai-status-badge">
                    <span class="badge-icon"></span>
                    <span class="badge-text">Neural Sync Active | 1.2ms latency</span>
                </div>

                <!-- Welcome Message -->
                <div class="ai-msg system-msg">
                    <div class="msg-content">
                        <p>Interface active. Powering high-performance inference. How can I assist with your technical
                            journey today?</p>
                    </div>
                </div>
            </div>

            <!-- Cool Idea: Quick Actions -->
            <div class="quick-actions">
                <button onclick="sendQuickAction('Summarize this page')">üìù Summarize</button>
                <button onclick="sendQuickAction('List latest posts')">üìå Latest</button>
                <button onclick="sendQuickAction('Who are you?')">ü§ñ Identity</button>
            </div>

            <div class="sidebar-footer">
                <div class="input-advanced-wrap">
                    <textarea id="ai-user-input" placeholder="Type your technical query..." rows="1"></textarea>
                    <div class="footer-actions">
                        <div class="model-info">
                            <span id="ai-stats-realtime" class="stats-mini"></span>
                        </div>
                        <div class="keyboard-hint">Double Enter to Send</div>
                        <button id="ai-send-btn" onclick="handleSendClick()">
                            <svg class="send-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                            <svg class="stop-icon" style="display:none;" width="18" height="18" viewBox="0 0 24 24"
                                fill="currentColor" stroke="none">
                                <rect x="4" y="4" width="16" height="16" rx="2" ry="2" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>